# Final Project – Midterm Plan

## Deploy Link
https://meet-half.vercel.app

## 使用說明

### 快速開始

1. **訪問應用**：打開 https://meet-half.vercel.app
2. **建立聚會**：
   - 點擊「建立聚會」按鈕
   - 填寫聚會名稱（例如：「週五火鍋」）
   - 選擇開始時間與結束時間
   - 使用 Google Places Autocomplete 搜尋並選擇集合地點
   - 點擊「建立聚會」完成建立
3. **分享連結**：建立成功後會顯示分享連結，複製並分享給朋友
4. **加入聚會**：
   - 打開分享連結
   - 點擊「加入聚會」按鈕
   - 填寫暱稱（例如：「小明」）
   - 選擇是否分享位置（建議開啟）
   - 選擇交通方式（開車/大眾運輸/步行/騎車）
   - 點擊「加入」完成加入
5. **即時追蹤**：
   - 加入後會自動開始追蹤位置（需允許瀏覽器位置權限）
   - 地圖上會顯示所有成員的即時位置
   - 成員列表會顯示每個人的狀態（前往中/已到達/遲到）
6. **標記到達**：到達集合地點後，點擊「我到了」按鈕
   - ⚠️ **未來版本**：系統會自動偵測距離，只有當您距離集合地點 50 公尺內時才能按「我到了」（目前版本可隨時點擊）
7. **戳人功能**：可以戳遲到的朋友（每人最多 3 次）
8. **查看排行榜**：活動結束後，點擊「查看排行榜結果」查看統計與排名

### 注意事項

- **位置權限**：首次使用時，瀏覽器會詢問位置權限，請選擇「允許」
- **時間窗限制**：位置追蹤僅在活動開始前 30 分鐘到結束後 30 分鐘內有效
- **Guest 模式**：目前支援無需註冊的 Guest 模式，填寫暱稱即可加入
- **即時更新**：位置更新會透過 Pusher 即時推送到所有成員，無需刷新頁面
- **瀏覽器相容性**：建議使用 Chrome、Safari、Firefox 等現代瀏覽器

### 測試建議

1. **建立測試聚會**：建立一個未來 1-2 小時的聚會
2. **多裝置測試**：使用不同裝置（手機/電腦）打開同一個聚會連結
3. **位置測試**：允許位置權限後，地圖上應該會顯示所有成員的位置
4. **即時更新測試**：移動位置，觀察地圖是否即時更新
5. **到達測試**：點擊「我到了」，觀察狀態是否更新

## 1. 本次 Prototype 已完成

### 核心功能
- ✅ **建立聚會頁面**：可填寫名稱、時間、地點（Google Places Autocomplete）
- ✅ **聚會房間（EventRoom）**：即時顯示成員列表、地圖、到達狀態
- ✅ **Guest 模式加入**：無需註冊，填暱稱即可加入聚會
- ✅ **即時位置追蹤**：使用 Pusher 推送位置更新，地圖即時顯示所有成員位置
- ✅ **到達標記**：「我到了」按鈕，自動計算準時/遲到
- ✅ **戳人功能**：可戳遲到的朋友（限制 3 次）
- ✅ **聚會結束排行榜**：顯示前三名、遲到統計、被戳排名
- ✅ **主揪顯示**：清楚標示活動主揪，成員列表中區分主揪

### 技術實現
- ✅ **前端架構**：React 18 + TypeScript + Vite + Material-UI
- ✅ **後端 API**：Node.js + Express + Prisma + PostgreSQL
- ✅ **即時通訊**：Pusher Channels（location-update, member-arrived, poke, event-ended）
- ✅ **地圖整合**：Google Maps JavaScript API，顯示集合點與成員位置
- ✅ **認證系統**：JWT（HttpOnly Cookie）+ Guest Token
- ✅ **位置追蹤**：navigator.geolocation API，時間窗內自動追蹤
- ✅ **自動加入**：已參加的活動自動識別，無需重新填寫暱稱

### 使用者體驗
- ✅ **Mobile-First 設計**：響應式設計，優先考慮手機體驗
- ✅ **即時更新**：位置更新立即反映在地圖上，無需等待 API 響應
- ✅ **錯誤處理**：友好的錯誤訊息與提示
- ✅ **開發模式優化**：放寬時間窗限制，方便開發測試

## 2. 最終版本預計完成項目

### 主要功能完善
- ⏳ **Sidebar 側邊欄**：我的聚會列表、個人統計、歷史記錄
- ⏳ **我的聚會頁面**：顯示所有參加過的聚會，包含狀態、排名、準時率
- ⏳ **個人統計**：總參加次數、準時率、遲到次數、被戳次數
- ⏳ **聚會歷史記錄**：保存過往聚會結果，可查看歷史排行榜

### MeetHalf 智能中點計算（可選功能）
- ⏳ **建立聚會時選擇**：可選擇「用 MeetHalf 找中間點」
- ⏳ **參加者填寫出發地**：選擇目前位置或輸入地址，選擇交通方式
- ⏳ **主揪計算中點**：按「計算中間點」按鈕，取得建議地點
- ⏳ **確認地點**：主揪確認後存為聚會集合點

### 進階功能
- ⏳ **PWA 支援**：離線快取、推送通知、可安裝到手機
- ⏳ **朋友系統**：建立朋友群組，快速邀請
- ⏳ **聚會模板**：保存常用聚會設定，快速建立
- ⏳ **統計圖表**：視覺化個人與群組統計數據
- ⏳ **匯出報表**：匯出聚會結果為 PDF 或 CSV

### 優化與修復
- ⏳ **距離檢測功能**：自動偵測距離集合地點的距離，只有當距離 < 50 公尺時才能按「我到了」按鈕，防止誤觸
- ⏳ **生產環境時間窗**：恢復正常的 30 分鐘時間窗限制
- ⏳ **位置權限優化**：改進權限請求流程與錯誤處理
- ⏳ **通知權限優化**：改進推送通知的權限處理
- ⏳ **效能優化**：減少不必要的 API 請求，優化地圖渲染
- ⏳ **完整測試**：單元測試、整合測試、E2E 測試

## 3. 預期開發進度

### Week 1 (12/06 - 12/12)
- **Sidebar 開發**：完成側邊欄元件與路由
- **我的聚會頁面**：實作聚會列表、篩選、排序功能
- **個人統計 API**：後端實作統計 API，前端整合顯示

### Week 2 (12/13 - 12/19)
- **MeetHalf 整合**：將現有 MeetHalf 功能整合為 Events 的可選模組
- **出發地填寫流程**：參加者填寫出發地與交通方式
- **中點計算功能**：主揪計算並確認中間點

### Week 3 (12/20 - 12/21)
- **PWA 功能**：Service Worker、離線快取、推送通知
- **介面優化**：統一設計風格、動畫效果、載入狀態
- **測試與修復**：完整測試流程、Bug 修復、效能優化


